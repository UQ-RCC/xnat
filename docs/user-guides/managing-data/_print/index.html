<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/managing-data/><link rel=alternate type=application/rss+xml href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/managing-data/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=https://docs.xnat.rcc.uq.edu.au/favicons/favicon.ico><link rel=apple-touch-icon href=https://docs.xnat.rcc.uq.edu.au/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-192x192.png sizes=192x192><title>Managing Data | UQ AIS XNAT</title>
<meta name=description content="Managing Data
"><meta property="og:url" content="https://docs.xnat.rcc.uq.edu.au/docs/user-guides/managing-data/"><meta property="og:site_name" content="UQ AIS XNAT"><meta property="og:title" content="Managing Data"><meta property="og:description" content="Managing Data"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Managing Data"><meta itemprop=description content="Managing Data"><meta itemprop=dateModified content="2023-06-30T18:08:05+10:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Managing Data"><meta name=twitter:description content="Managing Data"><link rel=preload href=https://docs.xnat.rcc.uq.edu.au/scss/main.min.92d3686efb7a50a381cdc643c57e5ff5baf5882ee7cddd08fc15dc2ab5aa79ad.css as=style><link href=https://docs.xnat.rcc.uq.edu.au/scss/main.min.92d3686efb7a50a381cdc643c57e5ff5baf5882ee7cddd08fc15dc2ab5aa79ad.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=https://docs.xnat.rcc.uq.edu.au/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>UQ AIS XNAT</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://xnat.rcc.uq.edu.au target=_blank rel=noopener><i class='fa-solid fa-arrow-up-right-from-square'></i><span>Link to XNAT</span></a></li><li class=nav-item><a class=nav-link href=mailto:rcc-support@uq.edu.au><i class='fa fa-envelope'></i><span>Support Ticket</span></a></li></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/managing-data/>Return to the regular view of this page</a>.</p></div><h1 class=title>Managing Data</h1><div class=lead>Managing Data</div><ul><li>1: <a href=#pg-ee7ed67f9acb0c89886b256cfb45af14>Downloading Data</a></li><ul><li>1.1: <a href=#pg-77381fb83cca8b55d55028c9cdea4544>Zip Download</a></li><li>1.2: <a href=#pg-094516ee4adc9f5034015b07d59de5bc>Desktop client</a></li><li>1.3: <a href=#pg-aeb1282a3a3a29dd315eb5f3d0ec4358>Download Scan</a></li></ul><li>2: <a href=#pg-14a598742b759a0829ec1a89a4d4d0a5>Viewing Images</a></li><ul></ul><li>3: <a href=#pg-085215f17b4a6ed3a8079873cd9e31ab>Uploading Data</a></li><ul><li>3.1: <a href=#pg-ff77a70b45a85f4de626a31b389c34bd>Web Upload</a></li><li>3.2: <a href=#pg-2392a94a4312c93b1607d750b947a897>Resource uploader</a></li><li>3.3: <a href=#pg-c2e8a4fb45f1d73925f55d773cfa680a>Prearchive</a></li></ul><li>4: <a href=#pg-8259e8ce2c94461841ccc7d5e0fc5d9f>Syncing Data</a></li><ul></ul><li>5: <a href=#pg-c441f6243f2317c368b0886dd1650313>Anonymising Data</a></li><ul><li>5.1: <a href=#pg-0718193c98e84551ba879763182cf306>Project anonymiser</a></li><li>5.2: <a href=#pg-e7b5faed54e18ca55911f1729bf437e9>Site anonymiser</a></li></ul></ul><div class=content></div></div><div class=td-content><h1 id=pg-ee7ed67f9acb0c89886b256cfb45af14>1 - Downloading Data</h1><div class=lead>Downloading data from XNAT Projects</div><ol><li>Navigate to Scan or Session (See guide on <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/browsing-data>browsing data</a>)</li><li>Select <code>Download</code> from controls on top right.</li><li>Use the following settings for downloading dataset as zip <img alt=text src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/xnat-data-download-options.png></li></ol><p>For further information refer to the <a href=https://wiki.xnat.org/documentation/how-to-use-xnat/how-to-download-image-data-from-xnat-projects>XNAT official guide on downloading data</a></p></div><div class=td-content><h1 id=pg-77381fb83cca8b55d55028c9cdea4544>1.1 - Zip Download</h1><div class=lead>Downloading data as Zip using the XNAT UI</div><p>The Project, Subject and Sessions page has the option to <strong>Download Images</strong> from the right hand side menu</p><p><img src=downloading-data-1.png width=50% style="border:1px solid #ddd"></img>
<img src=downloading-data-2.png width=50% style="border:1px solid #ddd"></img>
<img src=downloading-data-3.png width=50% style="border:1px solid #ddd"></img></p><p>Select <strong>Option 2: ZIP download</strong></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Untick <strong>Simply downloaded archive structure</strong> to keep scan names in scan folders</div><p><img src=downloading-data-zip.png width=70% style="border:1px solid #ddd"></img></p><p>Filter out the Session and scans from the first two columns and select <strong>Submit</strong></p></div><div class=td-content style=page-break-before:always><h1 id=pg-094516ee4adc9f5034015b07d59de5bc>1.2 - Desktop client</h1><div class=lead>Downloading data using the XNAT Desktop client</div><p>The XNAT Desktop client is maintained by the XNAT development team. For information see the link below.</p><dl><dt>XNAT Desktop client</dt><dd><a href=https://www.xnat.org/download/desktop-client/>https://www.xnat.org/download/desktop-client/</a></dd></dl><h2 id=install-client>Install client</h2><p>Download and install the client for you operating system</p><p><img src=desktop-client-1.png width=70% style="border:1px solid #ddd"></img></p><h2 id=download-images>Download images</h2><p>The Project, Subject and Sessions page has the option to <strong>Download Images</strong> from the right hand side menu</p><p><img src=desktop-client-2.png width=70% style="border:1px solid #ddd"></img></p><p>Select <strong>Option 1: Download via Desktop Client</strong></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Untick <strong>Simply downloaded archive structure</strong> to keep scan names in scan folders</div><p><img src=desktop-client-3.png width=70% style="border:1px solid #ddd"></img></p><p>Click <strong>Download Via App</strong></p><p><img src=desktop-client-4.png width=70% style="border:1px solid #ddd"></img></p><p>Select a local destination folder</p><p><img src=desktop-client-5.png width=70% style="border:1px solid #ddd"></img></p><p>Download should start, and progress can be monitored</p></div><div class=td-content style=page-break-before:always><h1 id=pg-aeb1282a3a3a29dd315eb5f3d0ec4358>1.3 - Download Scan</h1><div class=lead>Downloading induvidual Scans using the XNAT UI</div><p>Induvidual scans can be downloaded from the Sessions page</p><p><img src=downloading-data-scan-1.png width=70% style="border:1px solid #ddd"></img></p><p>Multiple scans can be selected and downloaded using <strong>Bulk Actions</strong></p><p><img src=downloading-data-scan-2.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-14a598742b759a0829ec1a89a4d4d0a5>2 - Viewing Images</h1><div class=lead>Viewing Images in the XNAT OHIF Viewer</div><h2 id=xnat-ohif-viewer>XNAT OHIF Viewer</h2><p>AIS XNAT instances come with the XNAT OHIF Image viewer
Which is a plugin developed by the Institute for Cancer Research in London</p><p>Just note, if your publication uses the OHIF viewer, they have an article for citation.
This information is all available at the link below</p><dl><dt>Documentation</dt><dd><a href=https://wiki.xnat.org/documentation/xnat-ohif-viewer>https://wiki.xnat.org/documentation/xnat-ohif-viewer</a></dd><dt>Using the XNAT OHIF Viewer</dt><dd><a href=https://wiki.xnat.org/documentation/xnat-ohif-viewer/using-the-xnat-ohif-viewer-122978515.html>https://wiki.xnat.org/documentation/xnat-ohif-viewer/using-the-xnat-ohif-viewer-122978515.html</a></dd></dl><p><img src=ohif-viewer-homepage.png width=70% style="border:1px solid #ddd"></img></p><h2 id=opening-images-in-ohif-viewer>Opening images in OHIF viewer</h2><p>You can access the viewer from Session page</p><p>Just click <strong>View Image</strong> on the actions panel</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Ignore the <em>View in Legacy Viewer</em></div><p><img src=accessing-viewer.png width=70% style="border:1px solid #ddd"></img></p><p>This will take you to the OHIF Viewer</p><p><img src=ohif-viewer.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-085215f17b4a6ed3a8079873cd9e31ab>3 - Uploading Data</h1><div class=lead>Upload data to XNAT Projects</div><ol><li>Web Upload (Compressed image uploader)</li><li>XNAT data client</li><li>CTP</li></ol><p>For further information refer to the <a href=https://wiki.xnat.org/documentation/how-to-use-xnat/image-session-upload-methods-in-xnat>image session upload methods in XNAT</a></p></div><div class=td-content><h1 id=pg-ff77a70b45a85f4de626a31b389c34bd>3.1 - Web Upload</h1><div class=lead>Upload using XNAT compressed uploader</div><h2 id=uploading-dicom-datasets>Uploading DICOM datasets</h2><div class="pageinfo pageinfo-primary"><p>This is for uploading <strong>de-identified DICOM</strong> files using the uploader directly from the XNAT website</p></div><ol><li>De-identify DICOM on scanner or upload pc</li><li>Zip DICOM files into a zip file</li><li>Login to XNAT (see <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/login-to-xnat/>Login to XNAT</a>)</li><li>From the top panel, select <strong>Upload → Images → Compressed Uploader</strong></li></ol><p><img src=upload-menu.png width=70% style="border:1px solid #ddd"></img></p><ol start=5><li>Specify the following options:<ul><li><strong>Project</strong></li><li><strong>Destination</strong>: Select <strong>Prearchive</strong></li><li><strong>Choose file</strong> to select zipped file with DICOMs</li></ul></li></ol><p><img src=compressed-uploader.png width=70% style="border:1px solid #ddd"></img></p><ol start=6><li>Click <strong>Begin Upload</strong>
Wait for:<ul><li>Upload percent bar to finish (**percent bar may not appear for small datasets)</li><li><strong>Background processes</strong> panel to appear on bottom right</li><li>Green tick on under <strong>Upload extraction/review for archival</strong></li></ul></li></ol><p><img src=upload-success.png width=70% style="border:1px solid #ddd"></img></p><div class="alert alert-warning" role=alert>In case of <strong>Background process</strong> errors, expand panel using double arrows on bottom right for more details
<img src=upload-failure.png width=70% style="border:1px solid #ddd"></img></div><p>For further information refer to the <a href=https://wiki.xnat.org/documentation/how-to-use-xnat/image-session-upload-methods-in-xnat/using-the-compressed-image-uploader>XNAT official guide on using the compressed image uploader</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-2392a94a4312c93b1607d750b947a897>3.2 - Resource uploader</h1><div class=lead>Resource uploader</div><p>This is to create a web upload form for repeated uploads of any data type.</p><p>Navigate to <strong>Project → Manage → Project Resource Settings → Start</strong></p><p><img src=resource-uploader-1.png width=70% style="border:1px solid #ddd"></img></p><p>Select <strong>Image Sessions</strong>. Enter the following required fields</p><ul><li><strong>Title</strong>: e.g. Rawdata</li><li><strong>Resource Folder</strong>: e.g. RAW</li><li><input checked disabled type=checkbox> <strong>Extract compressed files by default</strong></li></ul><p>Select <strong>Add</strong> when complete</p><p><img src=resource-uploader-2.png width=70% style="border:1px solid #ddd"></img></p><p>To upload file(s) using the resource uploader, <strong>Upload Additional Files</strong> from the Sessions page</p><p><img src=resource-uploader-3.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-c2e8a4fb45f1d73925f55d773cfa680a>3.3 - Prearchive</h1><div class=lead>XNAT Prearchive</div><p>If a dataset has not arrived into your XNAT project, the prearchive would be the place to check</p><p>This usually happens when:</p><ul><li>a DICOM dataset matching an existing session gets resent</li><li>a part of a session gets uploaded separately</li></ul><h2 id=accessing-the-prearchive>Accessing the prearchive</h2><p>Go to <strong>Upload</strong> on the top menu, and <strong>Go to prearchive</strong></p><p><img src=prearchive-1.png width=70% style="border:1px solid #ddd"></img></p><p>The following is an example of a session that is in conflict.
We can select the session and choose <strong>Details</strong>.</p><p><img src=prearchive-2.png width=70% style="border:1px solid #ddd"></img></p><p>Here we can download the session, or individual scans.
And review the datasets</p><ul><li>Choose <strong>Archive</strong> if you want the dataset merged into the existing one on the archive,</li><li>choose <strong>Modify and Archive</strong> if any details need to be changed before archiving, or if you don’t want this dataset to merge with the existing one</li></ul><p><img src=prearchive-3.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-8259e8ce2c94461841ccc7d5e0fc5d9f>4 - Syncing Data</h1><div class=lead>Syncing data to other XNAT Projects</div><p>The UQ-RCC XNAT may be able to sync datasets to other XNATs in Australia.</p><p>To see if your project is able to be synced, send a ticket to RCC support (<a href=mailto:rcc-support@uq.edu.au>rcc-support@uq.edu.au</a>)</p><p>They will need the details of the XNAT that you wish to share data with.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c441f6243f2317c368b0886dd1650313>5 - Anonymising Data</h1><div class=lead>Anonymising Data</div></div><div class=td-content><h1 id=pg-0718193c98e84551ba879763182cf306>5.1 - Project anonymiser</h1><div class=lead>Project anonymiser</div><p>The Project level anonymiser uses a scripting syntax called DicomEdit to modify, reassign or blank DICOM tags.
You can actually use this to create automated workflow for renaming DICOM metadata on datasets</p><dl><dt>Dicomedit</dt><dd><a href=https://wiki.xnat.org/xnat-tools/dicomedit/dicomedit-6-3-language-reference>https://wiki.xnat.org/xnat-tools/dicomedit/dicomedit-6-3-language-reference</a></dd></dl><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>version</span> <span style=color:#4e9a06>&#34;6.1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>project</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#4e9a06>&#34;Unassigned&#34;</span> <span style=color:#a40000>?</span> <span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0008</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>1030</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>project</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0010</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0010</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>subject</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0010</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0020</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>session</span>
</span></span></code></pre></div><p>The example in this screenshot basically replicates the behaviour in the HIRF onsite anonymiser for remapping the ReferringPhysicianName, PatientName and PatientID</p><p><img src=project-anonymiser-1.png width=70% style="border:1px solid #ddd"></img></p><p>You can use DICOMedit to enforce a particular naming and tagging scheme across your entire project this way.</p><h2 id=anonymising-existing-sesssions>Anonymising existing sesssions</h2><div class="alert alert-secondary" role=alert><h4 class=alert-heading>Note</h4>If you’re planning to use the project level anonymiser, best solution would be to have your project’s renaming, retagging or anonymisation scheme established before starting data acquisition.</div><p>The Project level anonymiser works best for new sessions, as it runs when the dataset is being ingested into the XNAT archive, or when sessions are renamed. By default, it does not anonymise sessions that are sitting in the archive already.</p><p>If you need to trigger your anonymisation on an existing session</p><ul><li>Edit a session name. Modify</li><li>Then edit it back to its original name</li></ul><p>This will trigger the anonymisation script.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Session edits take a bit of time, as the files and metadata are modified during edits, so allow some wait time if you use this method.</div><p><img src=project-anonymiser-2.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-e7b5faed54e18ca55911f1729bf437e9>5.2 - Site anonymiser</h1><div class=lead>Site anonymiser</div><p>HIRF and CAI data are anonymised on-site by default with the following protocols</p><h2 id=modified-tags>Modified Tags</h2><table><thead><tr><th>DICOM Tag</th><th>Original value</th><th>New value</th></tr></thead><tbody><tr><td>PatientBirthDate</td><td>10/12/2000</td><td>1/1/2000</td></tr><tr><td>PatientComments</td><td>XXXXXXXX</td><td>Project:Proj001 Subject:TEST_MR Session:TEST_MR-20210405T1220</td></tr><tr><td>ReferringPhysicianName</td><td>Proj001</td><td>Proj001</td></tr><tr><td>PatientName</td><td>XXXXXXXX</td><td>TEST_MR</td></tr><tr><td>PatientID</td><td>TEST_MR</td><td>TEST_MR-20210405T1220</td></tr></tbody></table><h2 id=blanked-tags>Blanked Tags</h2><table><thead><tr><th>DICOM Tag</th></tr></thead><tbody><tr><td>AccessionNumber</td></tr><tr><td>ImageComments</td></tr><tr><td>OperatorName</td></tr><tr><td>OtherPatientIDs</td></tr><tr><td>AdditionalPatientHistory</td></tr><tr><td>AdmittingDiagnosisDescription</td></tr><tr><td>MedicalRecordLocator</td></tr><tr><td>NameOfPhysicianReadingStudy</td></tr><tr><td>Occupation</td></tr><tr><td>OtherPatientNames</td></tr><tr><td>PatientBirthTime</td></tr><tr><td>PerformingPhysicianName</td></tr><tr><td>PhysicianOfRecord</td></tr><tr><td>ReferringPhysicianAddress</td></tr><tr><td>ReferringPhysicianPhoneNumbers</td></tr></tbody></table></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2024
<span class=td-footer__authors>UQ Research Computing Centre (RCC) & Australian National Imaging Facility (ANIF)</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div></div></footer></div><script src=https://docs.xnat.rcc.uq.edu.au/js/main.min.6c259fc4830bfdfc54ec8fc0240782b25bb1cd85617cf0cc95bf020b78b898cb.js integrity="sha256-bCWfxIML/fxU7I/AJAeCsluxzYVhfPDMlb8CC3i4mMs=" crossorigin=anonymous></script><script defer src=https://docs.xnat.rcc.uq.edu.au/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=https://docs.xnat.rcc.uq.edu.au/js/tabpane-persist.js></script></body></html>