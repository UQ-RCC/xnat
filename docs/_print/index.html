<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://docs.xnat.rcc.uq.edu.au/docs/><link rel=alternate type=application/rss+xml href=https://docs.xnat.rcc.uq.edu.au/docs/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=https://docs.xnat.rcc.uq.edu.au/favicons/favicon.ico><link rel=apple-touch-icon href=https://docs.xnat.rcc.uq.edu.au/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://docs.xnat.rcc.uq.edu.au/favicons/android-192x192.png sizes=192x192><title>Documentation | UQ AIS XNAT</title>
<meta name=description content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><meta property="og:title" content="Documentation"><meta property="og:description" content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><meta property="og:type" content="website"><meta property="og:url" content="https://docs.xnat.rcc.uq.edu.au/docs/"><meta itemprop=name content="Documentation"><meta itemprop=description content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><meta name=twitter:card content="summary"><meta name=twitter:title content="Documentation"><meta name=twitter:description content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><link rel=preload href=https://docs.xnat.rcc.uq.edu.au/scss/main.min.fb4e555fa66aa26634c3a84dfbc414a19fd77ba8a13bccfe6937af2c8937a46f.css as=style><link href=https://docs.xnat.rcc.uq.edu.au/scss/main.min.fb4e555fa66aa26634c3a84dfbc414a19fd77ba8a13bccfe6937af2c8937a46f.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar navbar-dark js-navbar-scroll"><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=https://docs.xnat.rcc.uq.edu.au/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>UQ AIS XNAT</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://xnat.rcc.uq.edu.au target=_blank rel=noopener><i class='fa-solid fa-arrow-up-right-from-square'></i><span>Link to XNAT</span></a></li><li class=nav-item><a class=nav-link href=mailto:rcc-support@uq.edu.au><i class='fa fa-envelope'></i><span>Support Ticket</span></a></li></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=https://docs.xnat.rcc.uq.edu.au/docs/>Return to the regular view of this page</a>.</p></div><h1 class=title>Documentation</h1><ul><li>1: <a href=#pg-8dc0bc81a633fa13c77d65f585fa9fb6>User Guides</a></li><ul><li>1.1: <a href=#pg-d4cad5787092a44537c6df4c46ca6b0b>Getting Started</a></li><ul><li>1.1.1: <a href=#pg-969aacc03050db0675c4a8c7fb999132>UQ members</a></li><li>1.1.2: <a href=#pg-c12350d0fe6d96d6361b5bd2b2938a0a>Other AAF members</a></li><li>1.1.3: <a href=#pg-c70179caf15c824a566e2e3f54ae0e6b>Non-AAF members</a></li><li>1.1.4: <a href=#pg-44bf775b57710be569f71452e7fcf2cc>HIRF users</a></li></ul><li>1.2: <a href=#pg-9cdedf32f71895047e614c8ad7dfce98>Logging into XNAT</a></li><ul><li>1.2.1: <a href=#pg-5fb860a27f2d6d80753a84588a09fed5>AAF login</a></li><li>1.2.2: <a href=#pg-017260e58a92aa98ee2f5edb47d723e9>RCC Authenticate</a></li><li>1.2.3: <a href=#pg-24b7273250ba1f4425b753393b365ba0>Alias tokens</a></li></ul><li>1.3: <a href=#pg-662ae9923e5b51878b76580dfa92cf90>Browsing XNAT</a></li><ul><li>1.3.1: <a href=#pg-0ea390aed247dc839eda0543f728c815>Projects</a></li><ul><li>1.3.1.1: <a href=#pg-5e38cd92259d7585870d10a03ed4630b>Granting Access</a></li></ul><li>1.3.2: <a href=#pg-170c89d1ebce599c970cdacbc10c421c>Subjects</a></li><ul></ul><li>1.3.3: <a href=#pg-47a75468e8d4a999139d77689b50e1e7>Sessions</a></li><ul><li>1.3.3.1: <a href=#pg-2da86a91a56c5908887bc52a1797676c>Scans</a></li></ul><li>1.3.4: <a href=#pg-b40fb2a0d18fe751d17035ea7785cf06>Search</a></li><ul></ul></ul><li>1.4: <a href=#pg-86fe177ed184327ee9c4a5d9c7b6d45e>Managing Data</a></li><ul><li>1.4.1: <a href=#pg-ee7ed67f9acb0c89886b256cfb45af14>Downloading Data</a></li><ul><li>1.4.1.1: <a href=#pg-77381fb83cca8b55d55028c9cdea4544>Zip Download</a></li><li>1.4.1.2: <a href=#pg-094516ee4adc9f5034015b07d59de5bc>Desktop client</a></li><li>1.4.1.3: <a href=#pg-aeb1282a3a3a29dd315eb5f3d0ec4358>Download Scan</a></li></ul><li>1.4.2: <a href=#pg-14a598742b759a0829ec1a89a4d4d0a5>Viewing Images</a></li><ul></ul><li>1.4.3: <a href=#pg-085215f17b4a6ed3a8079873cd9e31ab>Uploading Data</a></li><ul><li>1.4.3.1: <a href=#pg-ff77a70b45a85f4de626a31b389c34bd>Web Upload</a></li><li>1.4.3.2: <a href=#pg-2392a94a4312c93b1607d750b947a897>Resource uploader</a></li><li>1.4.3.3: <a href=#pg-c2e8a4fb45f1d73925f55d773cfa680a>Prearchive</a></li></ul><li>1.4.4: <a href=#pg-8259e8ce2c94461841ccc7d5e0fc5d9f>Syncing Data</a></li><ul></ul><li>1.4.5: <a href=#pg-c441f6243f2317c368b0886dd1650313>Anonymising Data</a></li><ul><li>1.4.5.1: <a href=#pg-0718193c98e84551ba879763182cf306>Project anonymiser</a></li><li>1.4.5.2: <a href=#pg-e7b5faed54e18ca55911f1729bf437e9>Site anonymiser</a></li></ul></ul><li>1.5: <a href=#pg-70183d49072121a0cfb16d59bbb61ebe>Processing Data</a></li><ul><li>1.5.1: <a href=#pg-7ea9b4c5c43b5fc3fb9c3e79baf1914a>Command line tools</a></li><ul></ul></ul><li>1.6: <a href=#pg-e20abd3cdd5978e5599f0b0223def547></a></li></ul><li>2: <a href=#pg-455b45e7add59d18d6bca919136f4d84>Facility Guides</a></li><ul><li>2.1: <a href=#pg-4c4f6a5df41ef0fa7b40c0e83371789a>Clinical Trials Processor (CTP)</a></li><ul><li>2.1.1: <a href=#pg-8aecf49a4cf122712627dfdc75afb303>Installation</a></li><li>2.1.2: <a href=#pg-568ab31665ca86a422aa8b2d8651481c>Proxy Server Settings</a></li><li>2.1.3: <a href=#pg-0a31d9c1b24686a14e5cd865bfb582be>Windows Service</a></li><li>2.1.4: <a href=#pg-e79a96f79dcbe907be035d6b31d9a572>Linux Service</a></li></ul></ul></ul><div class=content></div></div><div class=td-content><h1 id=pg-8dc0bc81a633fa13c77d65f585fa9fb6>1 - User Guides</h1><div class=lead>For Researchers and Collaborators</div></div><div class=td-content><h1 id=pg-d4cad5787092a44537c6df4c46ca6b0b>1.1 - Getting Started</h1><div class=lead>Signing up and getting started with UQ-RCC XNAT</div></div><div class=td-content><h1 id=pg-969aacc03050db0675c4a8c7fb999132>1.1.1 - UQ members</h1><div class=lead>For UQ Staff and Students</div><h2 id=signing-into-xnat>Signing into XNAT</h2><hr><h4 id=step-1>Step 1</h4><p>Open <a href=https://xnat.rcc.uq.edu.au>https://xnat.rcc.uq.edu.au</a><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>This is the link to the UQ AIS XNAT. If you have been provided with a project specific XNAT link to use, use that one instead</div></p><h4 id=step-2>Step 2</h4><p>Login in with the AAF Single sign-on button (shown below).</p><p>Follow the AAF login process for your organisation</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/xnat-aaf-login-page.png width=100% style="border:1px solid #ddd"></img></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Unexpected error</h4><p>If you encounter the following error, refresh the page 2-3 times. The login should progress</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/ais-keycloak-login-error.png width=50% style="border:1px solid #ddd"></img></p><p>If the error remains after multiple refreshes, contact support.</p></div><h4 id=step-3>Step 3</h4><p>After the AAF sign-in, you should be redirected back to XNAT (Example below)</p><p>There will be <strong>no projects listed</strong> when signing in for the first-time, as your user account would have just been created.</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started//xnat-signed-in.png width=100% style="border:1px solid #ddd"></img></p><p><em>Proceed to to next section for setting up an XNAT project</em></p><h2 id=creating-xnat-project>Creating XNAT project</h2><hr><p>For UQ users, XNAT uses UQ-RDM HPC collections for storage allocation.<br>For any general questions about UQ-RDM, please refer to the <a href=https://guides.library.uq.edu.au/for-researchers/uq-research-data-manager>library guides</a></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Only one member of the project team needs to request for the project</div><h4 id=step-1-1>Step 1</h4><p>Before creating an XNAT project, you&rsquo;ll require a UQ-RDM <strong>HPC Collection</strong></p><ul><li><strong>HPC collections</strong> ends with <strong>-Q</strong> and a 4-digit numerical identifier (e.g. PROJ001-<strong>Q0189</strong>)</li><li><strong>Non-HPC collections</strong> end with <strong>-A</strong> (e.g. PROJ001-<strong>A0189</strong>) or <strong>-I</strong> (PROJ001-<strong>I0189</strong>)</li></ul><div class="alert alert-warning" role=alert>If you have an existing UQ-RDM <strong>HPC collection</strong> (ending with <strong>-Qxxxx</strong>), skip to the <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/#step-2-1>next step</a></div><p>To create a new UQ-RDM <strong>HPC Collection</strong>, proceed with the following</p><p>Open <a href=https://rdm.uq.edu.au/create-record>https://rdm.uq.edu.au/create-record</a> and sign-in</p><p>Fill in the record as per your project details</p><p><img src=../uqrdm-create-record.png width=100% style="border:1px solid #ddd"></img></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Important</h4><p>For <font color=red>(6) Data Storage Options</font>, select the second option (<font color=red><em>The project data needs to be mounted on UQ HPC facilities.</em></font>)</p><p>Any other option will be incompatible with XNAT, requiring a new RDM request</p></div><p><strong>REQUEST DATA STORAGE</strong> when complete</p><p>Move on to the next step after the RDM collection is provisioned<br>You should have an RDM collection name ready (e.g. <strong>PROJ001-Q0189</strong>)</p><h4 id=step-2-1>Step 2</h4><p>Open a ticket with RCC support</p><p><em>Example below (replace __________ with your details)</em></p><div class="td-card card border me-4"><div class=card-header>To: <a href=mailto:rcc-support@uq.edu.au>rcc-support@uq.edu.au</a></div><div class=card-body><h6 class="card-title ms-2 text-muted">Subject: Create XNAT project __________</h6><p class=card-text>Hello RCC support
Can we create an XNAT project for RDM collection __________</p></div></div><h4 id=step-3-1>Step 3</h4><p>The support ticket will inform you when the project is set up.</p><ul><li>An XNAT project will be created with the matching name (e.g. <strong>PROJ001-Q0189</strong>)</li><li>An <strong>xnat</strong> directory will be created in the RDM collection for storing the XNAT data files</li><li>Please do not write or modify anything under the <strong>xnat</strong> directory</li></ul><p>XNAT Project setup typically takes around ~24 hours from ticket submission<br>An automated email from XNAT will be sent through when project is ready, and your user has been added</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c12350d0fe6d96d6361b5bd2b2938a0a>1.1.2 - Other AAF members</h1><div class=lead>Other AAF members</div><p>This guide is for users from Australian Universities and AAF member organisations, including:</p><ul><li>QUT, Griffith, CQU, JCU, USQ, USC</li><li>CSIRO, Australian Universities</li><li>AAF VHO accounts</li></ul><p>Other AAF members usually require UQ AIS XNAT access for:</p><ul><li>Management of data acquisition from sites such as CAI, HIRF, TRI</li><li>Collaborating on projects managed on UQ AIS XNAT</li></ul><p>Full list of AAF members found <a href=https://aaf.edu.au/subscribers>here</a><br>For all other organisations, use the <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/non-aaf-members/>Non-AAF members</a> guide</p><h2 id=signing-into-xnat>Signing into XNAT</h2><hr><h4 id=step-1>Step 1</h4><p>Open <a href=https://xnat.rcc.uq.edu.au>https://xnat.rcc.uq.edu.au</a><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>This is the link to the UQ AIS XNAT. If you have been provided with a project specific XNAT link to use, use that one instead</div></p><h4 id=step-2>Step 2</h4><p>Login in with the AAF Single sign-on button (<em>See below</em>).</p><p>Follow the AAF login process for your organisation</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/xnat-aaf-login-page.png width=100% style="border:1px solid #ddd"></img></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Unexpected error</h4><p>If you encounter the following error, refresh the page 2-3 times. The login should progress</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/ais-keycloak-login-error.png width=50% style="border:1px solid #ddd"></img></p><p>If the error remains after multiple refreshes, contact support.</p></div><h4 id=step-3>Step 3</h4><p>After the AAF sign-in, you should be redirected back to XNAT (<em>Example below</em>)</p><p>There will be <strong>no projects listed</strong> when signing in for the first-time, as your user account would have just been created.</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/xnat-signed-in.png width=100% style="border:1px solid #ddd"></img></p><h2 id=accessing-xnat-project>Accessing XNAT Project</h2><hr><h4 id=if-you-are-acquiring-data-at-hirf-cai-or-tri>If you are Acquiring data at HIRF, CAI or TRI</h4><ul><li>The respective facility will organise the project creation.</li><li>You will receive a follow up email when access has been granted</li><li>Contact <a href=mailto:rcc-support@uq.edu.au>rcc-support@uq.edu.au</a> if you have not received access within 5 working days</li></ul><h4 id=if-you-are-collaborating-on-an-existing-xnat-project>If you are collaborating on an existing XNAT project</h4><ul><li>Contact the project lead to grant you access to the XNAT project</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-c70179caf15c824a566e2e3f54ae0e6b>1.1.3 - Non-AAF members</h1><div class=lead>Non-University, non-AAF members and other users</div><p>This is for users from non-AAF member organisations, including:</p><ul><li>QLD Health, TRI, QIMR, QLD Xray</li></ul><p>Non-AAF members usually require XNAT access for:</p><ul><li>Management of data acquisition from sites such as CAI, HIRF, TRI</li><li>Collaborating on projects managed on UQ-RCC XNAT</li></ul><p>XNAT uses AAF for login. QCIF/QRIScloud can provide AAF Virtual Home (VHO) accounts for non-AAF users.</p><h2 id=creating-an-aaf-vho-account>Creating an AAF VHO account</h2><hr><h4 id=step-1>Step 1</h4><p>Open a ticket with RCC support to request an AAF account</p><p><em>Example below (replace __________ with your details)</em></p><div class="td-card card border me-4"><div class=card-header><strong>To:</strong> <a href=mailto:rcc-support@uq.edu.au>rcc-support@uq.edu.au</a></div><div class=card-body><h6 class="card-title ms-2 text-muted"><strong>Subject:</strong> XNAT AAF account for project __________</h6><p class=card-text>Hello RCC support
I require an AAF account to access the UQ AIS XNAT service<br>My details are below<br>Organisation: __________<br>Data Acquisition Site: __________<br></p></div></div><h4 id=step-2>Step 2</h4><p>AAF&rsquo;s VHO account will return an email regarding the VHO account registration process</p><h4 id=step-3>Step 3</h4><p><em>After account is provisioned, continue on to the <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/non-aaf-members/#signing-into-xnat>Signing into XNAT guide</a></em></p><h2 id=signing-into-xnat>Signing into XNAT</h2><hr><h4 id=step-1-1>Step 1</h4><p>Open <a href=https://xnat.rcc.uq.edu.au>https://xnat.rcc.uq.edu.au</a></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>This is the link to the UQ AIS XNAT. If you have been provided with a project specific XNAT link to use, use that one instead</div><h4 id=step-2-1>Step 2</h4><p>Login in with the AAF Single sign-on button (<em>See below</em>).</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/xnat-aaf-login-page.png width=100% style="border:1px solid #ddd"></img></p><p>Select the <strong>AAF Virtual Home</strong> option (<em>See below</em>) and login with your AAF VHO credentials.</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/aaf-virtual-home-login.png width=50% style="border:1px solid #ddd"></img>
<i class="fa-solid fa-arrow-right fa-xl" style=color:#000></i>
<img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/aaf-vho-signin.png width=25% style="border:1px solid #ddd"></img></p><h4 id=step-3-1>Step 3</h4><p>After the AAF sign-in, you should be redirected back to XNAT (<em>Example below</em>)</p><p>There will be <strong>no projects listed</strong> when signing in for the first-time, as your user account would have just been created.</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/xnat-signed-in.png width=100% style="border:1px solid #ddd"></img></p><h2 id=accessing-xnat-project>Accessing XNAT Project</h2><hr><h4 id=if-you-are-acquiring-data-at-hirf-cai-or-tri>If you are Acquiring data at HIRF, CAI or TRI</h4><ul><li>The respective facility will organise the project creation.</li><li>You will receive a follow up email when access has been granted</li><li>Contact <a href=mailto:rcc-support@uq.edu.au>rcc-support@uq.edu.au</a> if you have not received access within 5 working days</li></ul><h4 id=if-you-are-collaborating-on-an-existing-xnat-project>If you are collaborating on an existing XNAT project</h4><ul><li>Contact the project lead to grant you access to the XNAT project</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-44bf775b57710be569f71452e7fcf2cc>1.1.4 - HIRF users</h1><div class=lead>For users acquiring data at HIRF</div><p>Data acquired at HIRF can be sent to the UQ-RCC XNAT repository</p><p>To get started, refer to the relevant guide below:</p><ul><li><a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/uq-members/>UQ members</a><ul><li>UQ Staff and Students</li></ul></li><li><a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/other-aaf-members/>Other AAF members</a><ul><li>QUT, Griffith, CQU, JCU, USQ, USC, Bond</li><li>CSIRO, QCIF, Australian Universities</li><li>Full list of AAF members found <a href=https://aaf.edu.au/subscribers>here</a></li></ul></li><li><a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/non-aaf-members/>Non-AAF members</a><ul><li>TRI, QIMR</li><li>QLD Health, QLD Xray, Pacific Radiology</li></ul></li></ul><div class="alert alert-warning" role=alert>If you have multiple valid affiliations, we&rsquo;d recommend using <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/uq-members/>UQ</a> or <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/getting-started/other-aaf-members/>AAF</a> affiliation where possible</div><p>If you have any questions, contact <a href=mailto:rcc-support@uq.edu.au>rcc-support@uq.edu.au</a> or <a href=mailto:HIRFAdministration@health.qld.gov.au>HIRFAdministration@health.qld.gov.au</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-9cdedf32f71895047e614c8ad7dfce98>1.2 - Logging into XNAT</h1><div class=lead>Logging into XNAT</div><h2 id=aafaaf-login><a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/aaf-login/>AAF</a></h2><div class="alert alert-primary" role=alert><p>AAF is the recommended way to sign up and login to XNAT.</p><p>If your organisation is not in the AAF list during the sign-up process, please contact the respective XNAT support for further options</p></div><p>If your organisation is part of the Australian Access Federation (AAF), you can use your AAF credentials to sign up. See <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/aaf-login/>here</a></p><p>For more details on the Australian Access Federation, see <a href=https://aaf.edu.au>https://aaf.edu.au</a></p><h2 id=rcc-authenticatercc-login><a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/rcc-login/>RCC Authenticate</a></h2><p>To use this login, you would have received an email from a UQ XNAT administrator with the login information.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4><p>If you have not received an email, either use <a href=../aaf-login>AAF</a> or contact the respective XNAT support.<br></p><p>RCC Authenticate credentials are <strong>NOT</strong> your UQ or institutional username and password</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5fb860a27f2d6d80753a84588a09fed5>1.2.1 - AAF login</h1><div class=lead>Login using Australian Access Federation (AAF)</div><div class="alert alert-primary" role=alert><p>AAF is the recommended way to sign up and login to XNAT.</p><p>If your organisation is not in the AAF list during the sign-up process, please contact the respective XNAT support for further options</p></div><p>If your organisation is part of the Australian Access Federation (AAF), you can use your AAF credentials to sign up. Follow the steps below to sign-up/login using AAF.</p><ol><li>Open <a href=https://xnat.rcc.uq.edu.au>https://xnat.rcc.uq.edu.au</a></li><li>Login in with the AAF Single sign-on button (shown below)</li></ol><p><img src=../xnat-aaf-login-page.png width=100% style="border:1px solid #ddd"></img></p><p>This will take you to your XNAT home page.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Unexpected error</h4><p>If you encounter the following error, refresh the page 2-3 times. The login should progress</p><p><img src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/ais-keycloak-login-error.png width=50% style="border:1px solid #ddd"></img></p><p>If the error remains after multiple refreshes, contact support.</p></div><div class="alert alert-warning" role=alert><h4 class=alert-heading>First time users</h4>First time users will only see publically accessible project when they login</div></div><div class=td-content style=page-break-before:always><h1 id=pg-017260e58a92aa98ee2f5edb47d723e9>1.2.2 - RCC Authenticate</h1><div class=lead>Login using RCC Authenticate</div><p>To use this login, you would have received an email from a UQ XNAT administrator with the login information.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4><p>If you have not received an email, either use <a href=../aaf-login>AAF</a> or contact the respective XNAT support.</p><p>RCC Authenticate credentials are <strong>NOT</strong> your UQ or institutional username and password</p></div><ol><li>Login in with the RCC Authenticate button (shown below)</li></ol><p><img src=../rcc-login.png width=100% style="border:1px solid #ddd"></img></p><ol start=2><li>You’ll be taken to a UQ RCC SERVICES (shown below)</li></ol><p><img src=../rcc-signin.png width=50% style="border:1px solid #ddd"></img></p><ol start=3><li>Enter your user name and password to sign in.
This will take you to your XNAT home page.</li></ol><div class="alert alert-warning" role=alert><h4 class=alert-heading>For first time users</h4><p>Use your temporary username and temporary password to sign in.<br>The next screen will allow you set your permanent password</p><p>First-time user will only see publically accessible project when they login</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-24b7273250ba1f4425b753393b365ba0>1.2.3 - Alias tokens</h1><div class=lead>Alias tokens</div><p>AAF is used for logging into the XNAT website itself.</p><p>But there are a lot of tools and services that will require a connect to the XNAT server externally</p><p>These could include</p><ul><li>Windows or Mac desktop clients, like XNAT Desktop</li><li>Command line tools such as xnatpy, pyxnat, xnatutils etc</li><li>XSYNC</li></ul><p>All of these tools and services need a way to authenticating to your XNAT account without AAF.</p><p>An alias token is a time-limited, long, randomised username and password used for authenticating from external services, without compromising your AAF account or credentials. They can be generated and revoked easily</p><p><img src=alias-tokens-1.png width=50% style="border:1px solid #ddd"></img></p><p>We’ll look at how to generate them next</p><h2 id=generating-alias-tokens>Generating Alias tokens</h2><p>To access the alias token
Click your name on the top right of the website.
This will take you to your user profile management page</p><p>Then click the “Manage Alias Tokens” option</p><p>There, you’ll find the option to “Create an Alias Token”</p><p><img src=alias-tokens-2.png width=100% style="border:1px solid #ddd"></img></p><p>When you create the alias token, it will appear as a new entry</p><p>Alias tokens expire 60 days after creation
There will be an expiration date column.</p><p>You can have multiple alias tokens. And they can be deleted and created as needed to revoke permissions.
Each one will be randomised and unique.</p><p>Lets have a look at the alias token details which you can access by clicking on the token.</p><p><img src=alias-tokens-3.png width=100% style="border:1px solid #ddd"></img></p><p>The key attributes that we need are the alias and the secret
The alias is your username
And secret is your password</p><p>So you can use the alias and secret for any external clients requesting a username and password.</p><p>Just note, the alias and secret are effectively a temporary set of login credentials.
Do not reveal the secret. It is effectively your temporary password.
If you no longer require the alias token, or suspect a secret has been compromised, just delete the alias token.</p><p><img src=alias-tokens-4.png width=100% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-662ae9923e5b51878b76580dfa92cf90>1.3 - Browsing XNAT</h1><div class=lead>Browsing XNAT</div><p>For further information refer to the <a href=https://wiki.xnat.org/documentation/how-to-use-xnat/using-the-standard-search/browsing-data-types>XNAT official guides on browsing data</a></p></div><div class=td-content><h1 id=pg-0ea390aed247dc839eda0543f728c815>1.3.1 - Projects</h1><div class=lead>Managing Projects</div><p>When you login into the home page, the list of projects that you have access to will be on the left</p><ul><li>All datasets have to go into Projects</li><li>User access is controlled at the project level</li></ul><p><img src=project-list.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content><h1 id=pg-5e38cd92259d7585870d10a03ed4630b>1.3.1.1 - Granting Access</h1><div class=lead>Granting project access to other users</div><p>Switch to the Access tab. Use <font color=red><strong>Add User</strong></font> or <font color=red><strong>Add Users from List</strong></font> to select the user to add</p><p><img src=user-access.png width=70% style="border:1px solid #ddd"></img></p><p>Select role from</p><ol><li>Owners</li><li>Members</li><li>Collaborators</li></ol><h2 id=user-roles>User roles</h2><p>The following table outlines the permissions given to each role.</p><table><thead><tr><th>Permission</th><th>Owners</th><th>Members</th><th>Collaborators</th></tr></thead><tbody><tr><td>Data - Create</td><td>✓</td><td>✓</td><td>✗</td></tr><tr><td>Data - Read/Download</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Data - Update</td><td>✓</td><td>✓</td><td>✗</td></tr><tr><td>Data - Delete</td><td>✓</td><td>✗</td><td>✗</td></tr><tr><td>User - Add/Remove</td><td>✓</td><td>✗</td><td>✗</td></tr><tr><td>User - Change role</td><td>✓</td><td>✗</td><td>✗</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-170c89d1ebce599c970cdacbc10c421c>1.3.2 - Subjects</h1><div class=lead>Managing Subjects</div><p>The Project page will have a list of Subjects
If we click one of the subjects… it will take us to the subject page</p><p><img src=subjects.png width=70% style="border:1px solid #ddd"></img></p><p>The Subject will have some associated metadata and name extracted from the DICOM headers of the datasets</p><h2 id=editing-subjects>Editing Subjects</h2><p>We can edit subject details and metadata from the actions panel on the right</p><p><img src=subjects2.png width=70% style="border:1px solid #ddd"></img></p><p>For instance, if you want to rename the subject
You click the button next to the Subject ID</p><p><img src=subjects3.png width=70% style="border:1px solid #ddd"></img></p><p>This will pop-up the following dialog box for you enter the new subject.
Click modify, and then submit for the changes to take effect.</p><p>Just note, subject renaming can take a few minutes to take effect</p><p><img src=subjects4.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-47a75468e8d4a999139d77689b50e1e7>1.3.3 - Sessions</h1><div class=lead>Managing Scan Sessions</div><p>Sessions are divided into three types, based on modality information extracted from the DICOM metadata</p><ul><li>MR</li><li>CT</li><li>PET</li></ul><p>The following is an example MR session</p><p><img src=session-1.png width=70% style="border:1px solid #ddd"></img></p><h2 id=editing-sessions>Editing Sessions</h2><p>We can edit session details and metadata from the actions panel on the right</p><p><img src=session-2.png width=70% style="border:1px solid #ddd"></img></p><p>Here we can change some of the key properties of the sessions, such as</p><ul><li>Change session name</li><li>Move sessions to other projects</li><li>Move sessions to other subjects</li><li>Create a new subject, and move session to that subject</li><li>Fix invalid or blank session names</li></ul><p><img src=session-3.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-2da86a91a56c5908887bc52a1797676c>1.3.3.1 - Scans</h1><div class=lead>Accessing individual Scans</div><p>The Scans themselves are listed at the bottom with the relevant series descriptions and other information
If you hover over one of them, and click the highlighted view details button. This will open up a more details and an image preview window</p><p><img src=session-scan.png width=70% style="border:1px solid #ddd"></img></p><p>Here we can also view View DICOM headers</p><p><img src=scan-1.png width=70% style="border:1px solid #ddd"></img></p><p>And see the DICOM headers as shown on the right</p><p><img src=scan-2.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-b40fb2a0d18fe751d17035ea7785cf06>1.3.4 - Search</h1><div class=lead>Search across Projects, Subjects and Sessions</div><p>You can search across Projects, Subjects or Sessions
And Sessions are broken up into MR, PET and CT</p><p><img src=search-1.png width=70% style="border:1px solid #ddd"></img></p><p>For instance, we can fill a couple of fields on the MR Sessions search
You don’t have to specify all the fields</p><p><img src=search-2.png width=70% style="border:1px solid #ddd"></img></p><p>And XNAT will provide a list of results.</p><p><img src=search-3.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-86fe177ed184327ee9c4a5d9c7b6d45e>1.4 - Managing Data</h1><div class=lead>Managing Data</div></div><div class=td-content><h1 id=pg-ee7ed67f9acb0c89886b256cfb45af14>1.4.1 - Downloading Data</h1><div class=lead>Downloading data from XNAT Projects</div><ol><li>Navigate to Scan or Session (See guide on <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/browsing-data>browsing data</a>)</li><li>Select <code>Download</code> from controls on top right.</li><li>Use the following settings for downloading dataset as zip <img alt=text src=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/xnat-data-download-options.png></li></ol><p>For further information refer to the <a href=https://wiki.xnat.org/documentation/how-to-use-xnat/how-to-download-image-data-from-xnat-projects>XNAT official guide on downloading data</a></p></div><div class=td-content><h1 id=pg-77381fb83cca8b55d55028c9cdea4544>1.4.1.1 - Zip Download</h1><div class=lead>Downloading data as Zip using the XNAT UI</div><p>The Project, Subject and Sessions page has the option to <strong>Download Images</strong> from the right hand side menu</p><p><img src=downloading-data-1.png width=50% style="border:1px solid #ddd"></img>
<img src=downloading-data-2.png width=50% style="border:1px solid #ddd"></img>
<img src=downloading-data-3.png width=50% style="border:1px solid #ddd"></img></p><p>Select <strong>Option 2: ZIP download</strong></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Untick <strong>Simply downloaded archive structure</strong> to keep scan names in scan folders</div><p><img src=downloading-data-zip.png width=70% style="border:1px solid #ddd"></img></p><p>Filter out the Session and scans from the first two columns and select <strong>Submit</strong></p></div><div class=td-content style=page-break-before:always><h1 id=pg-094516ee4adc9f5034015b07d59de5bc>1.4.1.2 - Desktop client</h1><div class=lead>Downloading data using the XNAT Desktop client</div><p>The XNAT Desktop client is maintained by the XNAT development team. For information see the link below.</p><dl><dt>XNAT Desktop client</dt><dd><a href=https://www.xnat.org/download/desktop-client/>https://www.xnat.org/download/desktop-client/</a></dd></dl><h2 id=install-client>Install client</h2><p>Download and install the client for you operating system</p><p><img src=desktop-client-1.png width=70% style="border:1px solid #ddd"></img></p><h2 id=download-images>Download images</h2><p>The Project, Subject and Sessions page has the option to <strong>Download Images</strong> from the right hand side menu</p><p><img src=desktop-client-2.png width=70% style="border:1px solid #ddd"></img></p><p>Select <strong>Option 1: Download via Desktop Client</strong></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Untick <strong>Simply downloaded archive structure</strong> to keep scan names in scan folders</div><p><img src=desktop-client-3.png width=70% style="border:1px solid #ddd"></img></p><p>Click <strong>Download Via App</strong></p><p><img src=desktop-client-4.png width=70% style="border:1px solid #ddd"></img></p><p>Select a local destination folder</p><p><img src=desktop-client-5.png width=70% style="border:1px solid #ddd"></img></p><p>Download should start, and progress can be monitored</p></div><div class=td-content style=page-break-before:always><h1 id=pg-aeb1282a3a3a29dd315eb5f3d0ec4358>1.4.1.3 - Download Scan</h1><div class=lead>Downloading induvidual Scans using the XNAT UI</div><p>Induvidual scans can be downloaded from the Sessions page</p><p><img src=downloading-data-scan-1.png width=70% style="border:1px solid #ddd"></img></p><p>Multiple scans can be selected and downloaded using <strong>Bulk Actions</strong></p><p><img src=downloading-data-scan-2.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-14a598742b759a0829ec1a89a4d4d0a5>1.4.2 - Viewing Images</h1><div class=lead>Viewing Images in the XNAT OHIF Viewer</div><h2 id=xnat-ohif-viewer>XNAT OHIF Viewer</h2><p>AIS XNAT instances come with the XNAT OHIF Image viewer
Which is a plugin developed by the Institute for Cancer Research in London</p><p>Just note, if your publication uses the OHIF viewer, they have an article for citation.
This information is all available at the link below</p><dl><dt>Documentation</dt><dd><a href=https://wiki.xnat.org/documentation/xnat-ohif-viewer>https://wiki.xnat.org/documentation/xnat-ohif-viewer</a></dd><dt>Using the XNAT OHIF Viewer</dt><dd><a href=https://wiki.xnat.org/documentation/xnat-ohif-viewer/using-the-xnat-ohif-viewer-122978515.html>https://wiki.xnat.org/documentation/xnat-ohif-viewer/using-the-xnat-ohif-viewer-122978515.html</a></dd></dl><p><img src=ohif-viewer-homepage.png width=70% style="border:1px solid #ddd"></img></p><h2 id=opening-images-in-ohif-viewer>Opening images in OHIF viewer</h2><p>You can access the viewer from Session page</p><p>Just click <strong>View Image</strong> on the actions panel</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Ignore the <em>View in Legacy Viewer</em></div><p><img src=accessing-viewer.png width=70% style="border:1px solid #ddd"></img></p><p>This will take you to the OHIF Viewer</p><p><img src=ohif-viewer.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-085215f17b4a6ed3a8079873cd9e31ab>1.4.3 - Uploading Data</h1><div class=lead>Upload data to XNAT Projects</div><ol><li>Web Upload (Compressed image uploader)</li><li>XNAT data client</li><li>CTP</li></ol><p>For further information refer to the <a href=https://wiki.xnat.org/documentation/how-to-use-xnat/image-session-upload-methods-in-xnat>image session upload methods in XNAT</a></p></div><div class=td-content><h1 id=pg-ff77a70b45a85f4de626a31b389c34bd>1.4.3.1 - Web Upload</h1><div class=lead>Upload using XNAT compressed uploader</div><h2 id=uploading-dicom-datasets>Uploading DICOM datasets</h2><div class="pageinfo pageinfo-primary"><p>This is for uploading <strong>de-identified DICOM</strong> files using the uploader directly from the XNAT website</p></div><ol><li>De-identify DICOM on scanner or upload pc</li><li>Zip DICOM files into a zip file</li><li>Login to XNAT (see <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/login-to-xnat/>Login to XNAT</a>)</li><li>From the top panel, select <strong>Upload → Images → Compressed Uploader</strong></li></ol><p><img src=upload-menu.png width=70% style="border:1px solid #ddd"></img></p><ol start=5><li>Specify the following options:<ul><li><strong>Project</strong></li><li><strong>Destination</strong>: Select <strong>Prearchive</strong></li><li><strong>Choose file</strong> to select zipped file with DICOMs</li></ul></li></ol><p><img src=compressed-uploader.png width=70% style="border:1px solid #ddd"></img></p><ol start=6><li>Click <strong>Begin Upload</strong>
Wait for:<ul><li>Upload percent bar to finish (**percent bar may not appear for small datasets)</li><li><strong>Background processes</strong> panel to appear on bottom right</li><li>Green tick on under <strong>Upload extraction/review for archival</strong></li></ul></li></ol><p><img src=upload-success.png width=70% style="border:1px solid #ddd"></img></p><div class="alert alert-warning" role=alert>In case of <strong>Background process</strong> errors, expand panel using double arrows on bottom right for more details
<img src=upload-failure.png width=70% style="border:1px solid #ddd"></img></div><p>For further information refer to the <a href=https://wiki.xnat.org/documentation/how-to-use-xnat/image-session-upload-methods-in-xnat/using-the-compressed-image-uploader>XNAT official guide on using the compressed image uploader</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-2392a94a4312c93b1607d750b947a897>1.4.3.2 - Resource uploader</h1><div class=lead>Resource uploader</div><p>This is to create a web upload form for repeated uploads of any data type.</p><p>Navigate to <strong>Project → Manage → Project Resource Settings → Start</strong></p><p><img src=resource-uploader-1.png width=70% style="border:1px solid #ddd"></img></p><p>Select <strong>Image Sessions</strong>. Enter the following required fields</p><ul><li><strong>Title</strong>: e.g. Rawdata</li><li><strong>Resource Folder</strong>: e.g. RAW</li><li><input checked disabled type=checkbox> <strong>Extract compressed files by default</strong></li></ul><p>Select <strong>Add</strong> when complete</p><p><img src=resource-uploader-2.png width=70% style="border:1px solid #ddd"></img></p><p>To upload file(s) using the resource uploader, <strong>Upload Additional Files</strong> from the Sessions page</p><p><img src=resource-uploader-3.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-c2e8a4fb45f1d73925f55d773cfa680a>1.4.3.3 - Prearchive</h1><div class=lead>XNAT Prearchive</div><p>If a dataset has not arrived into your XNAT project, the prearchive would be the place to check</p><p>This usually happens when:</p><ul><li>a DICOM dataset matching an existing session gets resent</li><li>a part of a session gets uploaded separately</li></ul><h2 id=accessing-the-prearchive>Accessing the prearchive</h2><p>Go to <strong>Upload</strong> on the top menu, and <strong>Go to prearchive</strong></p><p><img src=prearchive-1.png width=70% style="border:1px solid #ddd"></img></p><p>The following is an example of a session that is in conflict.
We can select the session and choose <strong>Details</strong>.</p><p><img src=prearchive-2.png width=70% style="border:1px solid #ddd"></img></p><p>Here we can download the session, or individual scans.
And review the datasets</p><ul><li>Choose <strong>Archive</strong> if you want the dataset merged into the existing one on the archive,</li><li>choose <strong>Modify and Archive</strong> if any details need to be changed before archiving, or if you don’t want this dataset to merge with the existing one</li></ul><p><img src=prearchive-3.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-8259e8ce2c94461841ccc7d5e0fc5d9f>1.4.4 - Syncing Data</h1><div class=lead>Syncing data to other XNAT Projects</div><p>The UQ-RCC XNAT may be able to sync datasets to other XNATs in Australia.</p><p>To see if your project is able to be synced, send a ticket to RCC support (<a href=mailto:rcc-support@uq.edu.au>rcc-support@uq.edu.au</a>)</p><p>They will need the details of the XNAT that you wish to share data with.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c441f6243f2317c368b0886dd1650313>1.4.5 - Anonymising Data</h1><div class=lead>Anonymising Data</div></div><div class=td-content><h1 id=pg-0718193c98e84551ba879763182cf306>1.4.5.1 - Project anonymiser</h1><div class=lead>Project anonymiser</div><p>The Project level anonymiser uses a scripting syntax called DicomEdit to modify, reassign or blank DICOM tags.
You can actually use this to create automated workflow for renaming DICOM metadata on datasets</p><dl><dt>Dicomedit</dt><dd><a href=https://wiki.xnat.org/xnat-tools/dicomedit/dicomedit-6-3-language-reference>https://wiki.xnat.org/xnat-tools/dicomedit/dicomedit-6-3-language-reference</a></dd></dl><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>version</span> <span style=color:#4e9a06>&#34;6.1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>project</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#4e9a06>&#34;Unassigned&#34;</span> <span style=color:#a40000>?</span> <span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0008</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>1030</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>project</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0010</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0010</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>subject</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0010</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0020</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>session</span>
</span></span></code></pre></div><p>The example in this screenshot basically replicates the behaviour in the HIRF onsite anonymiser for remapping the ReferringPhysicianName, PatientName and PatientID</p><p><img src=project-anonymiser-1.png width=70% style="border:1px solid #ddd"></img></p><p>You can use DICOMedit to enforce a particular naming and tagging scheme across your entire project this way.</p><h2 id=anonymising-existing-sesssions>Anonymising existing sesssions</h2><div class="alert alert-secondary" role=alert><h4 class=alert-heading>Note</h4>If you’re planning to use the project level anonymiser, best solution would be to have your project’s renaming, retagging or anonymisation scheme established before starting data acquisition.</div><p>The Project level anonymiser works best for new sessions, as it runs when the dataset is being ingested into the XNAT archive, or when sessions are renamed. By default, it does not anonymise sessions that are sitting in the archive already.</p><p>If you need to trigger your anonymisation on an existing session</p><ul><li>Edit a session name. Modify</li><li>Then edit it back to its original name</li></ul><p>This will trigger the anonymisation script.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Session edits take a bit of time, as the files and metadata are modified during edits, so allow some wait time if you use this method.</div><p><img src=project-anonymiser-2.png width=70% style="border:1px solid #ddd"></img></p></div><div class=td-content style=page-break-before:always><h1 id=pg-e7b5faed54e18ca55911f1729bf437e9>1.4.5.2 - Site anonymiser</h1><div class=lead>Site anonymiser</div><p>HIRF and CAI data are anonymised on-site by default with the following protocols</p><h2 id=modified-tags>Modified Tags</h2><table><thead><tr><th>DICOM Tag</th><th>Original value</th><th>New value</th></tr></thead><tbody><tr><td>PatientBirthDate</td><td>10/12/2000</td><td>1/1/2000</td></tr><tr><td>PatientComments</td><td>XXXXXXXX</td><td>Project:Proj001 Subject:TEST_MR Session:TEST_MR-20210405T1220</td></tr><tr><td>ReferringPhysicianName</td><td>Proj001</td><td>Proj001</td></tr><tr><td>PatientName</td><td>XXXXXXXX</td><td>TEST_MR</td></tr><tr><td>PatientID</td><td>TEST_MR</td><td>TEST_MR-20210405T1220</td></tr></tbody></table><h2 id=blanked-tags>Blanked Tags</h2><table><thead><tr><th>DICOM Tag</th></tr></thead><tbody><tr><td>AccessionNumber</td></tr><tr><td>ImageComments</td></tr><tr><td>OperatorName</td></tr><tr><td>OtherPatientIDs</td></tr><tr><td>AdditionalPatientHistory</td></tr><tr><td>AdmittingDiagnosisDescription</td></tr><tr><td>MedicalRecordLocator</td></tr><tr><td>NameOfPhysicianReadingStudy</td></tr><tr><td>Occupation</td></tr><tr><td>OtherPatientNames</td></tr><tr><td>PatientBirthTime</td></tr><tr><td>PerformingPhysicianName</td></tr><tr><td>PhysicianOfRecord</td></tr><tr><td>ReferringPhysicianAddress</td></tr><tr><td>ReferringPhysicianPhoneNumbers</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-70183d49072121a0cfb16d59bbb61ebe>1.5 - Processing Data</h1><div class=lead>Processing Data</div></div><div class=td-content><h1 id=pg-7ea9b4c5c43b5fc3fb9c3e79baf1914a>1.5.1 - Command line tools</h1><div class=lead>Command line tools</div><h2 id=xnatutils>XnatUtils</h2><p><a href=https://github.com/Australian-Imaging-Service/xnatutils>https://github.com/Australian-Imaging-Service/xnatutils</a></p><p>Install xnatutils using</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>pip3 install xnatutils
</span></span></code></pre></div><h4 id=authenticating-using-netrc>Authenticating using <code>.netrc</code></h4><ol><li>Create an <a href=https://docs.xnat.rcc.uq.edu.au/docs/user-guides/logging-into-xnat/alias-tokens/>alias token</a>. Or use an existing alias token</li><li>Create a <code>.netrc</code> file in your home directory with the following details</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>machine https://xnat.rcc.uq.edu.au
</span></span><span style=display:flex><span>user &lt;your-alias-token&gt;
</span></span><span style=display:flex><span>password &lt;your-alias-secret&gt;
</span></span></code></pre></div><h2 id=xnatpy>xnatpy</h2><p><a href=https://xnat.readthedocs.io/en/latest/>https://xnat.readthedocs.io/en/latest/</a></p><h2 id=pyxnat>Pyxnat</h2><p><a href=https://pyxnat.github.io/pyxnat>https://pyxnat.github.io/pyxnat</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-e20abd3cdd5978e5599f0b0223def547>1.6 -</h1><div><nav id=TableOfContents><ul><li><a href=#example>Example</a></li></ul></nav></div><h2 id=example>Example</h2><p>Example</p></div><div class=td-content style=page-break-before:always><h1 id=pg-455b45e7add59d18d6bca919136f4d84>2 - Facility Guides</h1><div class=lead>For Clinical and Imaging facilities</div></div><div class=td-content><h1 id=pg-4c4f6a5df41ef0fa7b40c0e83371789a>2.1 - Clinical Trials Processor (CTP)</h1><div class=lead>Clinical trials Processor (CTP)</div></div><div class=td-content><h1 id=pg-8aecf49a4cf122712627dfdc75afb303>2.1.1 - Installation</h1><div class=lead>CTP Installation</div><h3 id=installing-ctp-on-windows-10>Installing CTP on Windows 10</h3><p>CTP installation steps</p><ol><li>Create a new user for CTP on UQ RCC XNAT (not an AAF/OpenID user) with required project access, without admin access</li><li>Download the following files<ul><li><a href=https://github.com/johnperry/CTP/raw/master/products/CTP-installer.jar>CTP-installer.jar</a></li><li><a href=https://github.com/Australian-Imaging-Service/configuration/raw/0c784a9bdd817ee5e0534034a5a108b4a1c6f4aa/CTP/ctp_clinical_site_to_xnat_config.xml>ctp_clinical_site_to_xnat_config.xml</a></li><li><a href=https://dicom.offis.de/download/dcmtk/dcmtk366/bin/dcmtk-3.6.6-win64-dynamic.zip>dcmtk-3.6.6-win64-dynamic.zip</a></li><li><a href=http://www.rubomedical.com/dicom_files/dicom_viewer_Mrbrain.zip>dicom_viewer_Mrbrain.zip</a></li><li>Optional if you need more DICOM samples: <a href=https://download.nrg.wustl.edu/pub/data/sample1.zip>sample1.zip</a></li></ul></li><li>Install CTP using:<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cd INSTALL_FOLDER (replace with your actual folder)
</span></span><span style=display:flex><span>java -jar CTP-installer.jar
</span></span></code></pre></div></li><li>Replace CTP/config.xml with ctp_clinical_site_to_xnat_config.xml</li><li>Edit CTP/config.xml<ul><li>Change &ldquo;xxxx.xxxx&rdquo; in two &ldquo;url&rdquo; tags to &ldquo;xnat.rcc.uq.edu.au&rdquo;</li><li>Change &ldquo;xxxx&rdquo; username and password tags to match new user from step 1</li><li>If CTP internet access is via a proxy server, add the proxy server element to the Server config<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>...
</span></span><span style=display:flex><span>&lt;Server ...&gt;
</span></span><span style=display:flex><span>  &lt;ProxyServer
</span></span><span style=display:flex><span>    proxyIPAddress=&#34;&#34;
</span></span><span style=display:flex><span>    proxyPort=&#34;&#34;
</span></span><span style=display:flex><span>    proxyUsername=&#34;&#34;
</span></span><span style=display:flex><span>    proxyPassword=&#34;&#34;/&gt;
</span></span><span style=display:flex><span>&lt;/Server&gt;
</span></span><span style=display:flex><span>...
</span></span></code></pre></div>Once this element is added proxy server settings can be updated in the CTP Launcher GUI</li></ul></li><li>Add CTP the anonymiser script<ul><li>Copy CTP/scripts/DicomServiceAnonymizer.script to CTP/scripts/dicom-anonymizer-sender.script</li><li>Add the PROJECTID parameter to the list of parameters at the start of the file<ul><li><code>&lt;p t="PROJECTID">my xnat project id&lt;/p></code></li></ul></li><li>Change the PatientComments element 0010,4000 to set XNAT project routing info<ul><li><code>@always()@append(){Project:@param(@PROJECTID) Subject:@contents([0010,0010]) Session:@contents([0008,0050])}</code></li></ul></li><li>Review/set other parameters at the start of the file<ul><li>PROFILENAME, eg. AIS-Clinical-Site-210604</li><li>DATEINC, eg. 0</li><li>PROJECTNAME, SITEID, SITENAME, TRIALNAME, TRIALSPONSOR as required</li></ul></li><li>Optional: review script to check anonymisation settings are appropriate</li></ul></li><li>Start CTP GUI<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>java -jar Launcher.jar
</span></span></code></pre></div></li><li>Click the CTP &ldquo;Start&rdquo; button</li><li>Click the &ldquo;CTP Home Page&rdquo; button to open the Web UI<ul><li>If the browser can&rsquo;t connect, check CTP is not already running, or try changing the Server port</li></ul></li><li>Login<ul><li>Top RHS banner should show &ldquo;Welcome admin&rdquo;</li></ul></li><li>Optional: click &ldquo;User Manager&rdquo; to change default usernames/passwords</li><li>Optional: click &ldquo;DICOM Anonymizer&rdquo; to view/edit anonymiser script</li><li>Unzip DCMTK and MrBrain dicom sample</li><li>Try sending an dicom to CTP using dcmtk<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cd dcmtk-3.6.5-win64-dynamic/bin
</span></span><span style=display:flex><span>dcmsend localhost 25055 ../../dicom_viewer_Mrbrain/MRBRAIN.DCM
</span></span></code></pre></div></li><li>Login to the XNAT server with an admin account to view Prearchive<ul><li>Use &ldquo;Upload&rdquo; → &ldquo;Go to prearchive&rdquo;</li><li>DICOM should appear in &ldquo;Receiving&rdquo; status, with project id assigned from step 6<ul><li>Optional: non-admin users need to search by subject/etc</li></ul></li><li>Use Refresh to check when &ldquo;Ready&rdquo; or it disappears from list (as it has been routed to the project)</li><li>Debugging: use dcm2xml from DCMTK to check anonymised dicom file under CTP/roots/FileAfterAnonymization25055</li></ul></li><li>Logout and login with the new XNAT user from step 1</li><li>Navigate to the project set in step 6<ul><li>You should see the dicom listed as subject &ldquo;1737775597&rdquo;</li></ul></li><li>Use subject &ldquo;1737775597&rdquo; → &ldquo;MR Session&rdquo; → &ldquo;View Images&rdquo; to view the uploaded image</li><li>Try a dicom send from the scanner using PC address and port 25055 (check windows firewall settings?)</li><li>Enable CTP as a Windows Service. Instructions <a href=https://docs.xnat.rcc.uq.edu.au/docs/facility-guides/ctp/windows-service/>here</a></li></ol><h3 id=further-information>Further information</h3><p>If you need a different commit of CTP-installer</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/johnperry/CTP
</span></span><span style=display:flex><span>cd CTP/products
</span></span><span style=display:flex><span>git checkout &lt;commit&gt; CTP-Installer.jar
</span></span></code></pre></div><p>If you need other AIS CTP config files</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/Australian-Imaging-Service/configuration.git
</span></span><span style=display:flex><span>cd configuration/CTP
</span></span></code></pre></div><p>CTP documentation links:</p><p><a href="http://mircwiki.rsna.org/index.php?title=MIRC_CTP">MIRC CTP Wiki</a></p><p><a href="http://mircwiki.rsna.org/index.php?title=The_CTP_DICOM_Anonymizer">CTP DICOM Anonymizer</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-568ab31665ca86a422aa8b2d8651481c>2.1.2 - Proxy Server Settings</h1><div class=lead>Updating CTP Proxy Server Settings</div><p>If CTP uses a proxy server for internet access, you can update the CTP proxy server settings on Windows as follows</p><ol><li><p>Stop the CTP Windows service</p><ul><li>If you already have a Services short-cut on the Windows desktop, double-click the short-cut to start Windows Services</li><li>If not, click the Windows start button, start typing &ldquo;services&rdquo; and the Services App icon should appear<ul><li>Click the Services App icon to start Windows Services</li></ul></li><li>Locate the CTP service in the list of services, right-click and select <strong>Stop</strong> from the context menu</li></ul></li><li><p>Start the CTP Launcher</p><ul><li>If you already have a CTP Launcher short-cut on the Windows desktop, double-click the short-cut to start the CTP Launcher</li><li>If not, locate the CTP service in the list of services again, right-click and select <strong>Properties</strong> from the context menu<ol><li>Use the <strong>Path to executable</strong> entry to find the installation folder for CTP. It will be in the form <code>&lt;install folder>\windows\CTP.exe</code></li><li>Open a Windows Command prompt window<ol><li>Click the Windows Start button, start typing &ldquo;cmd&rdquo; and the Command Prompt App icon should appear</li><li>Click the Command Prompt App icon to start the Command Prompt</li></ol></li><li>In the Command Prompt window, enter the following commands</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cd &lt;install folder&gt;
</span></span><span style=display:flex><span>java -jar Launcher.jar
</span></span></code></pre></div></li></ul></li><li><p>Navigate to the CTP Launcher Configuration tab</p></li><li><p>Use the navigation panel on the left to select <strong>Configuration</strong> -> <strong>Server</strong> -> <strong>ProxyServer</strong>
<img alt=text src=https://docs.xnat.rcc.uq.edu.au/docs/facility-guides/ctp/proxy-config.png></p></li><li><p>Update the proxy server settings in the right panel as required. You can set an IP address or host name in the proxyIPAddress field</p></li><li><p>Select <strong>File</strong> -> <strong>Save</strong> from the main menu bar to save your changes</p></li><li><p>Close the CTP Launcher using the Window close button at the top right<div class="alert alert-warning" role=alert>If the following prompt appears, select <strong>No</strong>.
<img alt=text src=https://docs.xnat.rcc.uq.edu.au/docs/facility-guides/ctp/close-launcher.png>
If the CTP is stopped, restart it from the Windows services menu (See below)</div></p></li><li><p>Close the Command Prompt window</p></li><li><p>Re-Start the CTP Windows service using Windows Services</p><p>Locate the CTP service in the list of services, right-click and select <strong>Start</strong> from the context menu</p><p><img alt=text src=https://docs.xnat.rcc.uq.edu.au/docs/facility-guides/ctp/windows-service.png></p></li></ol><h4 id=troubleshooting>Troubleshooting</h4><ul><li>If the CTP Windows service Stop is disabled, try restarting Windows Services as administrator by right-clicking the icon and selecting <strong>Run as administrator</strong></li></ul><h4 id=further-information>Further information</h4><ul><li><a href="https://mircwiki.rsna.org/index.php?title=MIRC_CTP#Server">CTP Server Settings</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-0a31d9c1b24686a14e5cd865bfb582be>2.1.3 - Windows Service</h1><div class=lead>Enabling CTP as a Windows Service</div><p>The CTP install.bat script uses Apache procrun. Use the following steps to enable CTP as a Windows service, including an update to use a JRE other than system default (leave out step 2 if using the system default JRE)</p><ol><li>Install CTP<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>java -jar CTP-installer.jar
</span></span></code></pre></div></li><li>To use JRE other than system default, edit <code>&lt;ctp-home>/windows/install.bat</code>. Find the &ndash;Jvm=auto, add &ndash;JavaHome entry and set both as follows<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>--JavaHome=&#34;&lt;jre home&gt; &#34; ^
</span></span><span style=display:flex><span>--Jvm=&#34;&lt;jre-home&gt;\bin\server\jvm.dll&#34; ^
</span></span></code></pre></div><ul><li>^ is needed to wrap/continue command line in batch file</li><li>The jvm.dll location under <jre-home>is the same for JRE 1.7 and 1.8 installs. Confirm this is the case for other JREs/JDKs</li></ul></li><li>Run install.bat as Administrator to create the CTP windows service<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cd &lt;ctp-home&gt;/windows
</span></span><span style=display:flex><span>install
</span></span></code></pre></div></li><li>Open Windows Services as Administrator and start the CTP service</li><li>Open CTP administration page in Web browser</li><li>Confirm the correct JRE is reported in Admin → System Properties and/or Admin → Log Viewer → ctp.log</li></ol><h4 id=troubleshooting>Troubleshooting</h4><ul><li>Installation paths are set in install.bat during CTP install so it won&rsquo;t work if you move the CTP folder somewhere else after install</li><li>If removing the service (with uninstall.bat) leaves the service stuck in delete pending state, reboot the system to complete</li></ul><h4 id=further-information>Further information</h4><ul><li><a href="https://mircwiki.rsna.org/index.php?title=Running_CTP_as_a_Windows_Service">Running CTP as a Windows service</a></li><li><a href=https://commons.apache.org/proper/commons-daemon/procrun.html>Apache procrun</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-e79a96f79dcbe907be035d6b31d9a572>2.1.4 - Linux Service</h1><div class=lead>Enabling CTP as a Linux Service</div><h2 id=ubuntu>Ubuntu</h2><p>Open <code>./linux/ctpService-ubuntu.sh</code>. Update the following parameters:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>USER=ubuntu
</span></span><span style=display:flex><span>CTP_HOME=/opt/ctp/CTP
</span></span><span style=display:flex><span>JAVA_BIN=/usr/lib/jvm/java-17-openjdk-amd64/bin
</span></span><span style=display:flex><span>JAVA=$JAVA_BIN/java
</span></span><span style=display:flex><span>CTP_PID=$CTP_HOME/ctp.pid
</span></span></code></pre></div><p>Run the following to install the ctpService into init.d</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sudo ln -s ./linux/ctpService-ubuntu.sh /etc/init.d/ctpService
</span></span><span style=display:flex><span>sudo update-rc.d ctpService defaults 98 02
</span></span></code></pre></div><p>Start and stop CTP using the following commands</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sudo service ctpService start
</span></span><span style=display:flex><span>sudo service ctpService stop
</span></span></code></pre></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"></div></div></div></footer></div><script src=https://docs.xnat.rcc.uq.edu.au/js/main.min.eddb9a20a4faaeabb111a3f75183b880bd5165a53b9541b8eb020eafec169250.js integrity="sha256-7duaIKT6rquxEaP3UYO4gL1RZaU7lUG46wIOr+wWklA=" crossorigin=anonymous></script><script defer src=https://docs.xnat.rcc.uq.edu.au/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin=anonymous></script><script src=https://docs.xnat.rcc.uq.edu.au/js/tabpane-persist.js></script></body></html>